---
title: "Laravel ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒãƒ³ãƒ‰ ã¾ã¨ã‚"
emoji: "ğŸš€"
type: "tech"
topics:
  - "laravel"
  - "tips"
published: true
published_at: "2023-01-11 01:55"
---

## ã¯ã˜ã‚ã«

ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã§åˆ©ç”¨å¯èƒ½ãª`RefreshDatabase`ãƒˆãƒ¬ã‚¤ãƒˆã€`DatabaseMigrations`ãƒˆãƒ¬ã‚¤ãƒˆã§å‹•ã„ã¦ã„ã‚‹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒãƒ³ãƒ‰ãŒã©ã®ã‚ˆã†ãªå‹•ãã‚’ã™ã‚‹ã®ã‹èª¿ã¹ã‚‹æ©Ÿä¼šãŒã‚ã£ãŸã®ã§ã¡ã‚‡ã£ã¨ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚

## ç’°å¢ƒ

- Laravel 9.46.0

## ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§

### make:migration

```bash
$ php artisan make:migration ãƒ•ã‚¡ã‚¤ãƒ«å
```
ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆã™ã‚‹ã€‚

### migrate

```bash
$ php artisan migrate
```
ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã€‚

```bash
$ php artisan migrate --pretend
```

`--pretend`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã¨ã€å®Ÿè¡Œã™ã‚‹SQLæ–‡ã®ç¢ºèªã§ãã‚‹ã€‚
ãã®å ´åˆã€SQLã¯å®Ÿè¡Œã•ã‚Œãªã„ã€‚

ä¸‹è¨˜ã®è¨˜äº‹ã«`--pretend`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è©¦ã—ãŸå†…å®¹ãŒæ›¸ã„ã¦ã‚ã‚Šã¾ã™ã€‚
https://zenn.dev/naopusyu/articles/c2436e50db8f2a

### migrate:rollback

```bash
$ php artisan migrate:rollback
```

æœ€å¾Œã«å®Ÿè¡Œã—ãŸãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œã‚’ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã™ã‚‹ã€‚

```bash
$ php artisan migrate:rollback --step=3
```
`--step`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ãŸå ´åˆã€æŒ‡å®šã—ãŸæ•°ã ã‘ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€‚

:::message
`DatabaseMigrations`ãƒˆãƒ¬ã‚¤ãƒˆã¯ãƒ†ã‚¹ãƒˆçµ‚äº†æ™‚ã«ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚
:::

### migrate:reset

```bash
$ php artisan migrate:reset
```
ã™ã¹ã¦ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œã‚’ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã™ã‚‹ã€‚

### migrate:refresh

```bash
$ php artisan migrate:refresh
```
`migrate:reset`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€`migrate`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚

```bash
$ php artisan migrate:refresh --step=3
```

`--step`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã¨`migrate:reset`ã‚³ãƒãƒ³ãƒ‰ã§ã¯ãªãã€`migrate:rollback`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€`migrate`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚

### migrate:fresh

```bash
$ php artisan migrate:fresh
```

ã™ã¹ã¦ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‰Šé™¤ã—ã€`migrate`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚
ãƒ†ãƒ¼ãƒ–ãƒ«ã®å‰Šé™¤ã«ã¯`db:wipe`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã€‚
ãŸã ã—ã€å‰Šé™¤ã•ã‚Œã‚‹ã®ã¯ã€`--database`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æŒ‡å®šã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã¿ã€‚
æœªæŒ‡å®šã®å ´åˆã¯[ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æ¥ç¶šå…ˆ](https://github.com/laravel/laravel/blob/b4573d5cdefab25240f91a0348bfd86c0769aca7/config/database.php#L18)ã«ãªã‚‹ã€‚

:::message
`RefreshDatabase`ãƒˆãƒ¬ã‚¤ãƒˆã€`DatabaseMigrations`ãƒˆãƒ¬ã‚¤ãƒˆã¯ãƒ†ã‚¹ãƒˆé–‹å§‹æ™‚ã«ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚
:::

### migrate:install

```bash
$ php artisan migrate:install
```

`migrations`ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã™ã‚‹ã€‚
ãƒ†ãƒ¼ãƒ–ãƒ«åã¯[ã“ã“ã§å¤‰æ›´](https://github.com/laravel/laravel/blob/b4573d5cdefab25240f91a0348bfd86c0769aca7/config/database.php#L109)ãŒå¯èƒ½
ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ç›´æ¥å®Ÿè¡Œã™ã‚‹ã“ã¨ã¯ãªãã€`migrate`ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰å®Ÿè¡Œã•ã‚Œã‚‹ã€‚

### migrate:status

```bash
$ php artisan migrate:status
```

å®Ÿè¡Œã—ãŸãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã™ã‚‹ã€‚

## ã¾ã¨ã‚

ä»Šæ›´ãªãŒã‚‰ã€èª¿ã¹ã¦ã¿ã¦ã€
`migrate:reset`ã€`migrate:refresh`ã€`migrate:fresh`ã®3ã¤ã‚³ãƒãƒ³ãƒ‰ã®å‹•ãã®é•ã„ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚

ã¾ãŸã€`RefreshDatabase`ãƒˆãƒ¬ã‚¤ãƒˆã€`DatabaseMigrations`ãƒˆãƒ¬ã‚¤ãƒˆå…±ã«ãƒ†ã‚¹ãƒˆé–‹å§‹æ™‚ã«`migrate:fresh`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã„ãŸã‚“ã§ã™ã­ã€‚
`RefreshDatabase`ãƒˆãƒ¬ã‚¤ãƒˆã¯åå‰ã®é€šã‚Š`migrate:refresh`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã¨æ€ã£ã¦ã„ãŸã‚“ã§ã™ãŒé•ã£ãŸã‚ˆã†ã§ã™ã€‚

ã“ã†ã„ã†èª¿ã¹ã‚‚ã®ã¯ã€é–“é•ãˆã‚’ç›´ã›ãŸã‚Šã§ãã‚‹ã®ã§é•ã†å†…å®¹ã§ã¾ãŸã‚„ã‚ŠãŸã„ã¨æ€ã„ã¾ã™ã€‚