---
title: "Laravelã®ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ã§ãƒ‘ãƒ¼ã‚·ãƒ£ãƒ«ãƒ¢ãƒƒã‚¯ã‚’ä½¿ã†"
emoji: "ğŸŒ¿"
type: "tech"
topics:
  - "laravel"
  - "php"
  - "mockery"
published: true
published_at: "2023-09-14 00:34"
---

## ã¯ã˜ã‚ã«

ãµã¨ã€ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã„ãŸæ™‚ã«ç„¡ç†ã‚„ã‚Šä¾‹å¤–ã‚’ç™ºç”Ÿã•ã›ã¦catchå¾Œã®å‡¦ç†ã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ãŸã„ã¨æ€ã£ãŸæ™‚ã«è©¦ã—ãŸã“ã¨ã®ãƒ¡ãƒ¢ã§ã™ã€‚

## ç’°å¢ƒ
 
- PHP 8.2.10
- Laravel 10.23.0
- Mockery 1.6.6

## è©¦ã—ãŸã“ã¨

ã¤ãã®ã‚ˆã†ã«æ›¸ãã ã‘ã§ã™ã€‚

```php
use Exception;
use Illuminate\Support\Facades\DB;

DB::shouldReceive('commit')->andThrow(new Exception('ä¾‹å¤–'));
DB::makePartial();
```

Laravelã®ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ã¯`shouldReceive`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã¨å¼•æ•°ã«æŒ‡å®šã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãƒ¢ãƒƒã‚¯ã«ã§ãã¾ã™ã€‚

:::message
`shouldReceive`ãƒ¡ã‚½ãƒƒãƒ‰ã¯`Mockery`ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒè¿”ã£ã¦ãã¾ã™ã€‚
:::

ãã®ã‚ã¨ã§ã€`makePartial`ãƒ¡ã‚½ãƒƒãƒ‰ä½¿ã†ã“ã¨ã§`shouldReceive`ãƒ¡ã‚½ãƒƒãƒ‰ã§æŒ‡å®šã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ä»¥å¤–ã¯é€šå¸¸é€šã‚Šã®å‘¼ã³å‡ºã—ã§å‹•ã„ã¦ãã‚Œã¾ã™ã€‚

## å‚è€ƒ

https://github.com/mockery/mockery/issues/242
https://stackoverflow.com/questions/21107231/how-can-i-specify-partial-mockup-for-a-laravel-facade