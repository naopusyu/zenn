---
title: "ã€PHPã€‘composer auditã®è„†å¼±æ€§ã®ãƒã‚§ãƒƒã‚¯ã‚’æ„å›³çš„ã«é™¤å¤–ï¼ˆignoreï¼‰ã™ã‚‹æ–¹æ³•"
emoji: "ðŸŽ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics:
  - "php"
  - "composer"
published: false
---

ã“ã®è¨˜äº‹ã¯ [ã‚«ã‚ªãƒŠãƒ“ Advent Calendar 2025](https://qiita.com/advent-calendar/2025/kaonavi) 4æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚

## ã¯ã˜ã‚ã«

Composerã«ã¯auditã‚³ãƒžãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è„†å¼±æ€§ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®auditã‚³ãƒžãƒ³ãƒ‰ã®ä½¿ã„æ–¹ã«ã¤ã„ã¦ã¯ã€ä»¥å‰ã“ã¡ã‚‰ã®è¨˜äº‹ã§ç´¹ä»‹ã—ã¾ã—ãŸã€‚

https://zenn.dev/naopusyu/articles/64beb2e676cace

ä»Šå›žã¯auditã‚³ãƒžãƒ³ãƒ‰ã§æ¤œå‡ºã•ã‚ŒãŸè„†å¼±æ€§ã‚’**ãƒã‚§ãƒƒã‚¯å¯¾è±¡ã‹ã‚‰é™¤å¤–ï¼ˆignoreï¼‰ã™ã‚‹æ–¹æ³•**ãŒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«è¨˜è¼‰ã•ã‚Œã¦ã„ãŸã®ã§ã€å®Ÿéš›ã«æ‰‹ã‚’å‹•ã‹ã—ãªãŒã‚‰æ¤œè¨¼ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

https://getcomposer.org/doc/06-config.md#ignore

## ç’°å¢ƒ

- PHP 8.5.0
- Composer 2.9.2

## ãã‚‚ãã‚‚é™¤å¤–ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã‹

æ¤œçŸ¥ã—ãŸè„†å¼±æ€§ã‚’æ”¾ç½®ã™ã‚‹æ–¹ãŒå±é™ºãªã®ã§ä¿®æ­£ã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¾ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹æ–¹ãŒè‰¯ã„ã§ã™ã€‚
ãŸã ã€ä»¥ä¸‹ã®ã‚ˆã†ãªç†ç”±ã§ãƒã‚§ãƒƒã‚¯å¯¾è±¡ã‹ã‚‰é™¤å¤–ã—ãŸã„ã“ã¨ã‚‚ã‚ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

- è„†å¼±æ€§ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã¯å­˜åœ¨ã™ã‚‹ãŒè©²å½“ã‚³ãƒ¼ãƒ‰ã‚’åˆ©ç”¨ã—ã¦ã„ãªã„ãŸã‚ã€**å½±éŸ¿ãŒãªã„ã¨åˆ¤æ–­ã§ãã‚‹**
- ä½•ã‹ã—ã‚‰ã®ç†ç”±ã§ã™ãã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒã§ããªã„ãŸã‚ã€**ä¸€æ™‚çš„ã«ãƒã‚§ãƒƒã‚¯ã‚’é™¤å¤–ã—ãŸã„**

## é™¤å¤–ã™ã‚‹æ–¹æ³•

å…ˆã»ã©ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€ã¨composer.jsonã®configã‚¹ã‚­ãƒ¼ãƒžã«è¨­å®šï¼ˆCVE-1234ãªã©ã®é™¤å¤–ã—ãŸã„IDï¼‰ã‚’æ›¸ãã“ã¨ã§é™¤å¤–ã§ãã‚‹ã‚ˆã†ã§ã™ã€‚

ã¾ãŸã€æ›¸ãæ–¹ã«ã¯ä»¥ä¸‹ã®3ã¤ã®ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚

- ç†ç”±ã‚ã‚Šã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆ
- ç†ç”±ãªã—ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆ
- è©³ç´°ãªãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆ

### ç†ç”±ã‚ã‚Šã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆ

ã“ã®ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆã¯é™¤å¤–ã—ãŸã„IDã‚’ã‚­ãƒ¼ã¨ã—ã¦é™¤å¤–ã™ã‚‹ã®ã‹ç†ç”±ã‚’æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚

```json
"config": {
    "audit": {
        "ignore": {
            "CVE-1234": "xxxxxx",
            "PKSA-xxxx": "xxxxxx",
        }
    }
}
```

### ç†ç”±ãªã—ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆ

ã“ã®ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆã¯é™¤å¤–ã—ãŸã„IDã‚’é…åˆ—ã«æ›¸ãã ã‘ã§ã™ã€‚

```json
"config": {
    "audit": {
        "ignore": ["CVE-1234", "PKSA-xxxx"]
    }
}
```

### è©³ç´°ãªãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆ

ã“ã®ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆã¯å„IDã«å¯¾ã—ã¦é™¤å¤–è¨­å®šã®é©ç”¨ç¯„å›²ï¼ˆapplyï¼‰ã¨ç†ç”±ï¼ˆreasonï¼‰ã‚’ãã‚Œãžã‚Œã«æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚

```json
"config": {
    "audit": {
        "ignore": {
            "CVE-1234": {
                "apply": "audit",
                "reason": "xxxxx"
            },
            "PKSA-xxxx": {
                "apply": "block",
                "reason": "xxxxx"
            },
            "CVE-zzzz": {
                "apply": "all",
                "reason": "xxxxx"
            },
        }
    }
}
```

é™¤å¤–è¨­å®šã®é©ç”¨ç¯„å›²ï¼ˆapplyï¼‰ã«ã¯auditã€blockã€allã®3ã¤ã®ã©ã‚Œã‹ã‚’æŒ‡å®šã§ãã¾ã™ã€‚

- audit: auditã‚³ãƒžãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã®ãƒã‚§ãƒƒã‚¯å¯¾è±¡ã‹ã‚‰é™¤å¤–ã—ã¾ã™ï¼ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ›´æ–°æ™‚ã¯ãƒ–ãƒ­ãƒƒã‚¯ã™ã‚‹ï¼‰
- block: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ›´æ–°æ™‚ã¯ãƒ–ãƒ­ãƒƒã‚¯ã‚’ã—ãªã„ã§ã™ï¼ˆauditã‚³ãƒžãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã¯ãƒã‚§ãƒƒã‚¯å¯¾è±¡ã§ã™ï¼‰
- all: auditã¨blockã®2ã¤ã®æŒ™å‹•ã‚’ã—ã¾ã™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‹•ä½œã§ã™ï¼‰

:::message
å…ˆã«æ›¸ã„ãŸ2ã¤ã®ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆï¼ˆç†ç”±ã‚ã‚Š/ãªã—ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆï¼‰ã¯ã©ã¡ã‚‰ã‚‚**all**ãŒé©ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚
:::

## è©¦ã—ã¦ã¿ã‚‹

ä»Šå›žã¯symfony/http-foundationã‚’ä½¿ã£ã¦æ¤œè¨¼ã—ã¾ã™ã€‚
ã¾ãšã€æ¤œè¨¼ã®ãŸã‚ã«æ„å›³çš„ã«è„†å¼±æ€§ãŒå«ã¾ã‚Œã¦ã„ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆä¾‹:7.3.0ï¼‰ã‚’å…¥ã‚Œã¦ã„ã¾ã™ã€‚

```bash
composer require symfony/http-foundation:7.3.0
```

ã“ã®çŠ¶æ…‹ã§auditã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«è„†å¼±æ€§ãŒå ±å‘Šã•ã‚Œã¾ã™ã€‚

```bash
composer audit --locked
Found 1 security vulnerability advisory affecting 1 package:
+-------------------+----------------------------------------------------------------------------------+
| Package           | symfony/http-foundation                                                          |
| Severity          | high                                                                             |
| Advisory ID       | PKSA-365x-2zjk-pt47                                                              |
| CVE               | CVE-2025-64500                                                                   |
| Title             | CVE-2025-64500: Incorrect parsing of PATH_INFO can lead to limited authorization |
|                   | bypass                                                                           |
| URL               | https://symfony.com/blog/cve-2025-64500-incorrect-parsing-of-path-info-can-lead- |
|                   | to-limited-authorization-bypass                                                  |
| Affected versions | >=2.0.0,<3.0.0|>=3.0.0,<4.0.0|>=4.0.0,<5.0.0|>=5.0.0,<5.1.0|>=5.1.0,<5.2.0|>=5.2 |
|                   | .0,<5.3.0|>=5.3.0,<5.4.0|>=5.4.0,<5.4.50|>=6.0.0,<6.1.0|>=6.1.0,<6.2.0|>=6.2.0,< |
|                   | 6.3.0|>=6.3.0,<6.4.0|>=6.4.0,<6.4.29|>=7.0.0,<7.1.0|>=7.1.0,<7.2.0|>=7.2.0,<7.3. |
|                   | 0|>=7.3.0,<7.3.7                                                                 |
| Reported at       | 2025-11-12T11:09:14+00:00                                                        |
+-------------------+----------------------------------------------------------------------------------+
```

æ¬¡ã«composer.jsonã«ä»¥ä¸‹ã®å†…å®¹ã‚’æ›¸ãã¾ã™ã€‚

ä»Šå›žã¯**ç†ç”±ãªã—ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆ**ã§è©¦ã—ã¾ã™ã€‚

```json
"config": {
    "audit": {
        "ignore" : ["CVE-2025-64500"]
    }
}
```

æ›¸ã„ãŸã‚‰å†ã³auditã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚


```bash
% composer audit --locked
Found 1 ignored security vulnerability advisory affecting 1 package:
+-------------------+----------------------------------------------------------------------------------+
| Package           | symfony/http-foundation                                                          |
| Severity          | high                                                                             |
| Advisory ID       | PKSA-365x-2zjk-pt47                                                              |
| CVE               | CVE-2025-64500                                                                   |
| Title             | CVE-2025-64500: Incorrect parsing of PATH_INFO can lead to limited authorization |
|                   | bypass                                                                           |
| URL               | https://symfony.com/blog/cve-2025-64500-incorrect-parsing-of-path-info-can-lead- |
|                   | to-limited-authorization-bypass                                                  |
| Affected versions | >=2.0.0,<3.0.0|>=3.0.0,<4.0.0|>=4.0.0,<5.0.0|>=5.0.0,<5.1.0|>=5.1.0,<5.2.0|>=5.2 |
|                   | .0,<5.3.0|>=5.3.0,<5.4.0|>=5.4.0,<5.4.50|>=6.0.0,<6.1.0|>=6.1.0,<6.2.0|>=6.2.0,< |
|                   | 6.3.0|>=6.3.0,<6.4.0|>=6.4.0,<6.4.29|>=7.0.0,<7.1.0|>=7.1.0,<7.2.0|>=7.2.0,<7.3. |
|                   | 0|>=7.3.0,<7.3.7                                                                 |
| Reported at       | 2025-11-12T11:09:14+00:00                                                        |
| Ignore reason     | None specified                                                                   |
+-------------------+----------------------------------------------------------------------------------+
```

å®Ÿè¡Œçµæžœã§ã¯è„†å¼±æ€§ãŒå ±å‘Šã•ã‚Œã¾ã™ãŒã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«`Found 1 ignored security vulnerability advisory affecting 1 package`ã¨ã‚ã‚‹ã‚ˆã†ã«é™¤å¤–ã—ã¦ã„ã‚‹çŠ¶æ…‹ãªã‚Šã¾ã—ãŸã€‚

## ã¾ã¨ã‚

ä»Šå›žã€Composerã®auditã‚³ãƒžãƒ³ãƒ‰ã®ãƒã‚§ãƒƒã‚¯å¯¾è±¡ã‹ã‚‰é™¤å¤–ã™ã‚‹æ–¹æ³•ã‚’è©¦ã—ã¾ã—ãŸã€‚

åŸºæœ¬çš„ã«ã¯è¦‹ã¤ã‹ã£ãŸè„†å¼±æ€§ã¯æ”¾ç½®ã›ãšã«ä¿®æ­£ã™ã‚‹ã“ã¨ãŒæœ›ã¾ã—ã„ã§ã™ã€‚
ã—ã‹ã—ã€å½±éŸ¿ãªã„ã¨åˆ¤æ–­ã§ãã‚‹å ´åˆã‚„ã€ä½•ã‹ã—ã‚‰ã®ç†ç”±ã§ä¿®æ­£ã§ããªã„å ´åˆã«ã¯å½¹ç«‹ã¤æ–¹æ³•ã‹ã¨æ€ã„ã¾ã™ã€‚

ã¾ãŸé™¤å¤–è¨­å®šã™ã‚‹ã¨auditã‚³ãƒžãƒ³ãƒ‰ã®çµ‚äº†ã‚³ãƒ¼ãƒ‰ã¯0ï¼ˆæˆåŠŸï¼‰ã‚’è¿”ã™ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚â€»å…¨ã¦é™¤å¤–ã—ãŸå ´åˆ
ã“ã‚Œã«ã‚ˆã‚Šã€CIã§ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã‚‹å ´åˆã«å¯¾å¿œã›ãšæ”¾ç½®ã—ã¦å¸¸ã«å¤±æ•—ã‹ã‚‰è„†å¼±æ€§ãŒè¦‹ã¤ã‹ã£ãŸæ™‚ã ã‘å¤±æ•—ã•ã›ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
