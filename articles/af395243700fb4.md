---
title: "symfony/consoleで少しリッチなツールを作る"
emoji: "👋"
type: "tech"
topics: [
    "php",
    "symfony"
]
published: false
---

## はじめに

日常的にツールを適当なPHPファイル（test.phpなど）を作って書いていたが、味気ないので`symfony/console`を使って少しリッチなツールに変えてみた。

## 環境

- PHP 8.3.12

## やるぞー

まずはパッケージのインストール

```bash
composer require symfony/console
```

クラスだけ作る

中身は後から

```php:SampleCommand.php
<?php

declare(strict_types=1);

use Symfony\Component\Console\Command\Command;

class SampleCommand extends Command
{
}
```

実行するファイルも用意

```php:console
#!/usr/bin/env php
<?php

declare(strict_types=1);

require_once __DIR__ . '/vendor/autoload.php';

use Symfony\Component\Console\Application;

$application = new Application();
$application->run();
```

今回くらいの内容なら、`SingleCommandApplication`[^1]クラスを使って書いてもいいかもしれない。

[^1]:https://symfony.com/doc/current/components/console/single_command_tool.html

```php:console
<?php

declare(strict_types=1);

require_once __DIR__ . '/vendor/autoload.php';

use Symfony\Component\Console\Input\InputArgument;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;
use Symfony\Component\Console\SingleCommandApplication;

(new SingleCommandApplication())
    ->addArgument('text', InputArgument::REQUIRED)
    ->addArgument('sub-text', InputArgument::OPTIONAL, '', 'empty')
    ->setCode(function (InputInterface $input, OutputInterface $output): int {
        $output->writeln('Sample Command!');

        $output->writeln($input->getArgument('text'));

        $output->writeln($input->getArgument('sub-text'));

        return SingleCommandApplication::SUCCESS;
    })
    ->run();
```

## まとめ

## 参考

https://zenn.dev/ttskch/articles/ef89d74b9728ad

