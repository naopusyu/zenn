---
title: "Laravel11 authã‚³ãƒãƒ³ãƒ‰"
emoji: "ğŸŒ¿"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [
    "laravel",
    "php"
]
published: true
published_at: "2024-12-02 06:00"
---

ã“ã®è¨˜äº‹ã¯ [Laravel11ã«ã‚ã‚‹Artisanã‚³ãƒãƒ³ãƒ‰ã‚’å…¨éƒ¨èª¿ã¹ã‚‹ Advent Calendar 2024](https://adventar.org/calendars/10674) 2æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚

ä»Šå›ã¯authã‚³ãƒãƒ³ãƒ‰ã«ã¤ã„ã¦èª¿ã¹ã¾ã—ãŸã€‚

## ç’°å¢ƒ

- PHP 8.4.1
- laravel/laravel 11.3.3
- laravel/framework 11.33.2

## auth:clear-resets

æœŸé™åˆ‡ã‚Œã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆãƒˆãƒ¼ã‚¯ãƒ³ã‚’å‰Šé™¤ã™ã‚‹ã€‚

```
php artisan auth:clear-resets [<name>]
```

å®Ÿè¡Œã™ã‚‹ã¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ã«ä¿å­˜ã—ã¦ã„ã‚‹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆãƒˆãƒ¼ã‚¯ãƒ³ã‚’å‰Šé™¤ã—ã¾ã™ã€‚

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä»¥å¤–ã«ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ã†ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€å‡¦ç†ã‚’ç¢ºèªã™ã‚‹ã¨ä½•ã‚‚å®Ÿè£…ã•ã‚Œã¦ã„ãªã„ã®ã§ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å¤‰æ›´ã™ã‚‹å¿…è¦ã¯ãªã„ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã€‚

https://github.com/laravel/framework/blob/v11.33.2/src/Illuminate/Auth/Passwords/CacheTokenRepository.php#L120-L127

ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ã¤ã„ã¦ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ¶ˆã™ã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚‹ã®ã§ãã¡ã‚‰ã«ä»»ã›ã¦ã„ã‚‹ã®ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã€‚

ã‚‚ã—å¤‰æ›´ã™ã‚‹å ´åˆã¯config/auth.phpã®passwordsé…åˆ—ã«driveré …ç›®ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§å¤‰æ›´ã§ãã¾ã™ã€‚

```php:config/auth.php
    'passwords' => [
        'users' => [
            'driver' => 'cache', // ã“ã®è¡Œã‚’è¿½åŠ ã™ã‚‹
            'provider' => 'users',
            'table' => env('AUTH_PASSWORD_RESET_TOKEN_TABLE', 'password_reset_tokens'),
            'expire' => 60,
            'throttle' => 60,
        ],
    ],
```

| å¼•æ•° | èª¬æ˜ |
| --- | --- |
| `name` | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆãƒ‰ãƒ©ã‚¤ãƒã‚’æŒ‡å®š |

- `name`ã«ã¯config/auth.phpã®passwordséƒ¨åˆ†ã®é …ç›®åã‚’æŒ‡å®šã§ãã¾ã™ â€»æœªæŒ‡å®šã®å ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®usersã«ãªã‚Šã¾ã™
